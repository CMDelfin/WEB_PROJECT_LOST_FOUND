{% extends 'base.html' %}
{% block content %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<div class="admin-chat-container messages-page d-none d-md-flex">
    <div class="user-list col-3 border-end d-flex flex-column p-2">
        <h5 class="fw-bold text-center mb-3">Users</h5>
        <div class="list-group flex-grow-1 overflow-auto">
            {% for user in users %}
                <a href="{{ url_for('admin_messages', selected_user_id=user.id) }}"
                   class="list-group-item list-group-item-action d-flex align-items-center
                          {% if selected_user and user.id == selected_user.id %}active{% endif %}">
                    <div class="rounded-circle profile-placeholder me-2" style="width:35px;height:35px;">
                        {{ user.username[:2]|upper }}
                    </div>
                    <span class="flex-grow-1">{{ user.username }}</span>
                </a>
            {% endfor %}
        </div>
    </div>

    <div class="messages-column col-9 d-flex flex-column p-3">
        {% include 'admin_chat_window.html' %}
    </div>
</div>

<div class="messages-page-mobile d-flex flex-column d-md-none">

    {% if not selected_user %}
    
        <h5 class="fw-bold text-center mt-2 mb-2">Users</h5>
        <div class="list-group p-2">
            {% for user in users %}
                <a href="{{ url_for('admin_messages', selected_user_id=user.id) }}"
                   class="list-group-item list-group-item-action d-flex align-items-center">
                    <div class="rounded-circle profile-placeholder me-2" style="width:32px;height:32px;">
                        {{ user.username[:2]|upper }}
                    </div>
                    <span>{{ user.username }}</span>
                </a>
            {% endfor %}
        </div>

    {% else %}

        <div class="mobile-chat-header d-flex align-items-center p-2 border-bottom">
            <a href="{{ url_for('admin_messages') }}" class="me-2">
                <i class="fas fa-arrow-left fa-lg"></i>
            </a>
            <h5 class="fw-bold mb-0">{{ selected_user.username }}</h5>
        </div>

        {% include 'admin_chat_window.html' %}
    {% endif %}
</div>

{% endblock %}
