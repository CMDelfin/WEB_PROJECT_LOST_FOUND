{% extends 'base.html' %}
{% block content %}
<h2 class="fw-bold text-primary mb-3">All Reported Items</h2>

<!-- Search Bar -->
<form method="GET" class="d-flex mb-3">
  <input type="text" name="search" class="form-control me-2" placeholder="Search items..." value="{{ request.args.get('search', '') }}">
  <button type="submit" class="btn btn-primary">Search</button>
</form>

<!-- Items Table -->
{% if items %}
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-primary">
      <tr>
        <th>ID</th>
        <th>Item Name</th>
        <th>Description</th>
        <th>Location</th>
        <th>Status</th>
        <th>Resolved</th> <!-- ✅ New Column -->
        <th>Date Reported</th>
        <th>Reported By</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr>
        <td>{{ item.id }}</td>
        <td>{{ item.name }}</td>
        <td>{{ item.description }}</td>
        <td>{{ item.location }}</td>

        <td>
          {% if item.status == 'found' %}
            <span class="badge bg-success">Found</span>
          {% else %}
            <span class="badge bg-warning text-dark">Lost</span>
          {% endif %}
        </td>

        <!-- ✅ Show Resolved Status -->
        <td>
          {% if item.is_resolved %}
            <span class="badge bg-success">Yes</span>
          {% else %}
            <span class="badge bg-danger">No</span>
          {% endif %}
        </td>

        <td>
          {% if item.date_reported %}
            {{ item.date_reported.strftime('%Y-%m-%d') }}
          {% else %}
            <em class="text-muted">N/A</em>
          {% endif %}
        </td>

        <td>{{ item.user.username if item.user else 'Unknown' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p class="text-muted">No items found.</p>
{% endif %}
{% endblock %}
