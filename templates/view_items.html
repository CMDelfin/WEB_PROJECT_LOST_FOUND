{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <h2 class="fw-bold text-primary mb-4 text-center">📋 All Reported Items</h2>

  <form method="GET" class="d-flex justify-content-center mb-4">
    <input type="text" 
           name="search" 
           class="form-control w-100 shadow-sm me-2 rounded-pill px-3" 
           placeholder="🔍 Search items by name, description, or location..." 
           value="{{ request.args.get('search', '') }}">
    <button type="submit" class="btn btn-primary rounded-pill px-4">Search</button>
  </form>

  {% if items %}
  <div class="table-responsive shadow-sm rounded-4 bg-white p-3">
    <table class="table align-middle table-hover">
      <thead class="table-primary text-center">
        <tr>
          <th>ID</th>
          <th>Item Name</th>
          <th>Description</th>
          <th>Location</th>
          <th>Status</th>
          <th>Resolved</th>
          <th>Date Reported</th>
          <th>Reported By</th>
        </tr>
      </thead>
      <tbody class="text-center">
        {% for item in items %}
        <tr>
          <td>{{ item.id }}</td>
          <td class="fw-semibold">{{ item.name }}</td>
          <td class="text-muted">{{ item.description }}</td>
          <td>{{ item.location }}</td>

          <td>
            {% if item.status == 'found' %}
              <span class="badge bg-success px-3 py-2 rounded-pill shadow-sm">Found</span>
            {% else %}
              <span class="badge bg-warning text-dark px-3 py-2 rounded-pill shadow-sm">Lost</span>
            {% endif %}
          </td>

          <td>
            {% if item.is_resolved %}
              <span class="badge bg-success px-3 py-2 rounded-pill shadow-sm">Yes</span>
            {% else %}
              <span class="badge bg-danger px-3 py-2 rounded-pill shadow-sm">No</span>
            {% endif %}
          </td>

          <td>
            {% if item.date_reported %}
              {{ item.date_reported.strftime('%Y-%m-%d') }}
            {% else %}
              <em class="text-muted">N/A</em>
            {% endif %}
          </td>

          <td>{{ item.user.username if item.user else 'Unknown' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div class="text-center mt-5">
      <p class="text-muted fs-5">No items found. 🕵️‍♀️</p>
    </div>
  {% endif %}
</div>
{% endblock %}
